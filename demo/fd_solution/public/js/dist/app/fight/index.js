define("dist/app/fight/index",["jquery","../../lib/fight","../../lib/math","./tpl/log"],function(a){var b=a("jquery"),c=a("../../lib/fight"),d=a("./tpl/log"),e={bloodView:function(a,b,c,d,e){var f=a.find(".attack-name").eq(0),g=a.find(".attack .progress").eq(0),h=g.find(".bar").eq(0),i=a.find(".attack .blood-len").eq(0),j=a.find(".defence-name").eq(0),k=a.find(".defence .progress").eq(0),l=k.find(".bar").eq(0),m=a.find(".defence .blood-len").eq(0);f.text(b),i.text(c),g.width(c),h.width(c),j.text(d),m.text(e),k.width(e),l.width(e),a.show()}};b(function(){var a=b("#attack"),f=b("#defence"),g=b("#fight"),h=b("#bloodBar"),i=b("#box");g.click(function(){var g,j,k,l=b.trim(a.val()),m=b.trim(f.val()),n=c(l,m),o=n.attack.log,p=n.defence.log,q=[];for(g=0,j=o.length;j>g;g++)k=o[g],q[2*g]={attack:!0,from:l,to:m,type:k.type,hurt:k.hurt,left:k.left};for(g=0,j=p.length;j>g;g++)k=p[g],q[2*g+1]={from:m,to:l,type:k.type,hurt:k.hurt,left:k.left};e.bloodView(h,l,n.attack.life,m,n.defence.life),i.html(d.render({result:n,log:q}));var r=function(){i.dequeue("attack")},s=function(){var a=[],c=b(".attack-item");return c.each(function(d,e){a.push(function(){b(e).delay(2e3).fadeIn("slow",function(){var a=q[d];h.find("."+(0===d%2?"defence":"attack")+" .bar").eq(0).width(a.left),d===c.length-1?i.find(".fight-result").show():r()})})}),a}();i.queue("attack",s),r()})})}),define("dist/lib/fight",["./math"],function(a,b,c){var d=a("./math"),e={getNameNumber:function(a){var b=0,c=4,e=a.length;if(c>e)for(b=0;c-e>b;b++)a+="一";else e>c&&(a=a.slice(0,c));var f=d.stringN(a),g=300;return Math.floor(g+(f-g)/100)},normal:function(){return Math.floor(.5*d.random(60,150))},skill:function(){return Math.floor(1.25*d.random(60,150))}};c.exports=function(a,b){for(var c=e.getNameNumber(a),d=e.getNameNumber(b),f={attack:{name:a,life:c,blood:c,log:[]},defence:{name:b,life:d,blood:d,log:[]}},g=1,h=0,i=function(a){h=e[a](),f.defence.blood-=h,f.attack.log.push({type:a,hurt:h,left:Math.max(0,f.defence.blood)}),f.defence.blood>0&&(h=e[a](),f.attack.blood-=h,f.defence.log.push({type:a,hurt:h,left:Math.max(0,f.attack.blood)}))};f.attack.blood>0&&f.defence.blood>0;)i(g%3>0?"normal":"skill"),g++;return f.result=f.attack.blood>0?!0:!1,f}}),define("dist/lib/math",[],function(a,b,c){c.exports={random:function(a,b){return Math.ceil(Math.random()*(b-a)+a)},stringN:function(a){for(var b=0,c=encodeURIComponent(a).split("%"),d=1,e=c.length;e>d;d++){var f=c[d],g=f[0],h=f[1];g=isNaN(+g)?g.charCodeAt(0):g,h=isNaN(+h)?h.charCodeAt(0):h,b+=0===g||0===h?g+h:g*h}return b}}}),define("dist/app/fight/tpl/log",[],function(){return{render:function(a){var b=[],c=[];for(var d in a)b.push(d),c.push(a[d]);return new Function(b,"var _s=[];_s.push('');for(var index=0; index<log.length;index+=1){var item=log[index];_s.push(' <div class=\"attack-item\">',item.from,'使用 <em class=\"fight-type\">',item.type === 'normal' ? '普通攻击' : '必杀技能','</em>， 造成 <span class=\"fight-hurt\">',item.hurt,'</span>点伤害，',item.to,'剩余血量',item.left,'</div>');}_s.push(' <div class=\"fight-result\">');if(result.result){_s.push(result.attack.name);}else{_s.push(result.defence.name);}_s.push(' 取得了胜利 </div>'); return _s;").apply(null,c).join("")}}});